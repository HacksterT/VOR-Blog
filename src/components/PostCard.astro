---
interface Props {
  title: string;
  date: Date;
  description: string;
  slug: string;
  tags?: string[];
  coverImage?: string;
}

const { title, date, description, slug, tags = [], coverImage } = Astro.props;

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article
  class="group bg-white rounded-xl border border-vor-sand overflow-hidden hover:shadow-lg transition-shadow duration-300"
  data-tags={JSON.stringify(tags.map(t => t.toLowerCase()))}
>
  {coverImage ? (
    <a href={`/blog/${slug}`} class="block overflow-hidden">
      <img
        src={coverImage}
        alt={title}
        class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
      />
    </a>
  ) : (
    <a href={`/blog/${slug}`} class="block h-48 bg-gradient-to-br from-vor-warm to-vor-sand flex items-center justify-center">
      <span class="text-vor-gold text-4xl font-heading font-bold opacity-30">VOR</span>
    </a>
  )}

  <div class="p-6">
    <time class="text-xs font-heading text-vor-muted uppercase tracking-wider">
      {formattedDate}
    </time>

    <h3 class="mt-2 text-xl font-heading font-semibold text-vor-charcoal">
      <a href={`/blog/${slug}`} class="no-underline hover:text-vor-gold-dark transition-colors">
        {title}
      </a>
    </h3>

    <p class="mt-3 text-vor-charcoal-light text-sm leading-relaxed line-clamp-3">
      {description}
    </p>

    {tags.length > 0 && (
      <div class="mt-4 flex flex-wrap gap-2">
        {tags.map((tag) => (
          <a
            href={`/blog/tags/${tag.toLowerCase()}`}
            class="text-xs font-heading px-2.5 py-1 rounded-full bg-vor-warm text-vor-charcoal-light hover:bg-vor-sand no-underline transition-colors"
          >
            {tag}
          </a>
        ))}
      </div>
    )}
  </div>
</article>
