---
interface Props {
  title: string;
  date: Date;
  description: string;
  slug: string;
  tags?: string[];
  coverImage?: string;
}

const { title, date, description, slug, tags = [], coverImage } = Astro.props;

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const isMusic = tags.some((t) => t.toLowerCase() === 'music');
---

<a
  href={`/blog/${slug}`}
  class="group block bg-white rounded-xl border border-vor-sand overflow-hidden hover:shadow-lg transition-shadow duration-300 no-underline"
  data-tags={JSON.stringify(tags.map(t => t.toLowerCase()))}
>
  <div class="relative overflow-hidden">
    {coverImage ? (
      <img
        src={coverImage}
        alt={title}
        class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
      />
    ) : (
      <div class="h-48 bg-gradient-to-br from-vor-warm to-vor-sand flex items-center justify-center">
        <span class="text-vor-gold text-4xl font-heading font-bold opacity-30">VOR</span>
      </div>
    )}

    {isMusic && (
      <span class="absolute top-3 left-3 inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-heading font-medium text-white" style="background-color: #A8863E;">
        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />
        </svg>
        New Music
      </span>
    )}
  </div>

  <div class="p-6">
    <time class="text-xs font-heading text-vor-muted uppercase tracking-wider">
      {formattedDate}
    </time>

    <h3 class="mt-2 text-xl font-heading font-semibold text-vor-charcoal group-hover:text-vor-gold-dark transition-colors">
      {title}
    </h3>

    <p class="mt-3 text-vor-charcoal-light text-sm leading-relaxed line-clamp-3">
      {description}
    </p>

    {tags.length > 0 && (
      <div class="mt-4 flex flex-wrap gap-2">
        {tags.map((tag) => (
          <span class="text-xs font-heading px-2.5 py-1 rounded-full bg-vor-warm text-vor-charcoal-light">
            {tag}
          </span>
        ))}
      </div>
    )}
  </div>
</a>
